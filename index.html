<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>HOME</title>
    <svg>
        <defs>
            <filter id="distort">
                <feTurbulence baseFrequency="0.01 0.01" numOctaves="1" result="noise"  />
                <feDisplacementMap in="SourceGraphic" in2="noise" scale="2" xChannelSelector="R" yChannelSelector="R">
            </filter>
            
        </defs>
    </svg>
    <link rel="stylesheet" href="style2.css">

    <!-- <script src="script.js"></script> -->
    <script type="text/javascript">
        var UserAgent = navigator.userAgent;
        if (UserAgent.match(/iPhone|Android|Windows CE|BlackBerry|Symbian|Windows Phone|webOS|Opera Mini|Opera Mobi|POLARIS|IEMobile|lgtelecom|nokia|SonyEricsson/i) != null || UserAgent.match(/LG|SAMSUNG|Samsung/) != null) { location.href = "index_mb.html"; /* 모바일 홈페이지 경로 */ }
    </script>

</head>
<body>
    <div class="head">
        <div class="Header_right">
            <div class="main" onclick="contentShowSection('detail/compression', 'part/work')">Work</div>
            <div class="main" onclick="contentShowSection('detail/web/living', 'part/web')">Web</div>
            <div class="main" onclick="contentShowSection('detail/project/gangnam', 'part/project')">Project</div>
            <div class="main" onclick="showContent('https://jiho6693.github.io/archive/', 'https://jiho6693.github.io/archive/image.html')">library</div>
            <div class="line"><hr/></div>
        </div>
        <div class="Header_left">
            <div class="main" onclick="contentShowSection('part/intro', 'part/cv')">박지호</div>
            <div class="main" onclick="contentShowSection('part/intro', 'part/cv')">Jiho Park</div>
            <div class="line"><hr/></div>
        </div>
        
    </div>

    <div class='v-line'></div>
  
    <div class="all">
        <div class="right">
          
        </div>

        <div class="left">
           
        </div>    
    </div>

    

<script>



// 초기 섹션 로드
showSection('work', 'right');
showSection('../detail/landscape', 'left');

// 공통 콘텐츠 로드
['header', 'intro'].forEach(id => loadContent(`../part/${id}`, id));

// 섹션 표시 함수
function showSection(sectionId, targetSide) {
    const filePath = `../part/${sectionId}`;  // 동적 파일 경로
    loadContent(filePath, targetSide);        // 동적 콘텐츠 로드
}


// 콘텐츠 로드 함수
function loadContent(url, targetSide) {
    const container = document.querySelector(`.${targetSide}`);
    if (!container) {
        console.error(`Container with class ${targetSide} not found.`);
        return;
    }

    fetch(url)
        .then(response => {
            if (!response.ok) {
                throw new Error(`Failed to load content from ${url}`);
            }
            return response.text();
        })
        .then(data => {
            container.innerHTML = data;
            container.scrollTop = 0; // 스크롤 초기화
        })
        .catch(error => {
            container.innerHTML = `<p style="color: red;">Error loading content: ${error.message}</p>`;
        });
}

// 콘텐츠 로드 및 표시 함수 (iframe 포함)
function showContent(urlLeft, urlRight) {
    const rightContainer = document.querySelector('.right');
    const leftContainer = document.querySelector('.left');

    if (urlRight && rightContainer) {
        rightContainer.innerHTML = ''; // 기존 콘텐츠 제거
        const iframeRight = document.createElement('iframe');
        iframeRight.src = urlRight;
        iframeRight.style.width = '100%';
        iframeRight.style.height = '100%';
        iframeRight.style.border = 'none';
        rightContainer.appendChild(iframeRight);
    }

    if (urlLeft && leftContainer) {
        leftContainer.innerHTML = ''; // 기존 콘텐츠 제거
        const iframeLeft = document.createElement('iframe');
        iframeLeft.src = urlLeft;
        iframeLeft.style.width = '100%';
        iframeLeft.style.height = '100%';
        iframeLeft.style.border = 'none';
        leftContainer.appendChild(iframeLeft);
    }
}


// contentShowSection 함수 추가 (왼쪽과 오른쪽 콘텐츠 동적 로드)
function contentShowSection(urlLeft, urlRight) {
    if (urlLeft) {
        loadContent(urlLeft, 'left');
    }
    if (urlRight) {
        loadContent(urlRight, 'right');
    }
}



let observer;
const observedElements = new Set(); // 중복 방지를 위한 Set

function initializeObserver() {
    if (!observer) {
        observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const contentUrl = entry.target.getAttribute('data-content-url');
                    const targetSide = entry.target.getAttribute('data-side');
                    if (contentUrl) {
                        loadContent(contentUrl, targetSide);
                    }
                }
            });
        }, {
            // rootMargin: '0px 0px -60% 0px',
            rootMargin: '0px 0px -0% 0px',
            threshold: 1
        });
    }
}

function observeNewContent() {
    document.querySelectorAll('.scroll-trigger').forEach(element => {
        if (!observedElements.has(element)) {
            observer.observe(element); // 새로운 요소만 관찰
            observedElements.add(element);
        }
    });
}

function enableDynamicObservation() {
    const targetNode = document.body;
    const config = { childList: true, subtree: true };

    const mutationObserver = new MutationObserver(() => {
        requestAnimationFrame(() => observeNewContent()); // 성능 개선을 위해 debounce-like 사용
    });

    mutationObserver.observe(targetNode, config);
}

// 페이지 로드 후 초기화
window.addEventListener('load', () => {
    initializeObserver();
    observeNewContent();
    enableDynamicObservation();
});




//   function openModal() {
//       document.getElementById('modal-background').style.display = 'block';
//       document.getElementById('modal').style.display = 'block';
//     }

//     // 모달 닫는 함수
//     function closeModal() {
//       document.getElementById('modal-background').style.display = 'none';
//       document.getElementById('modal').style.display = 'none';
//     }

//     // 크기 조정 기능 추가
//     var modal = document.getElementById('modal');
//     var resizeHandle = document.getElementById('resize-handle');
//     var isResizing = false;

//     // 마우스 다운 이벤트
//     resizeHandle.addEventListener('mousedown', function(e) {
//       isResizing = true;
//       document.addEventListener('mousemove', handleResize);
//       document.addEventListener('mouseup', stopResizing);
//     });

//     // 마우스 움직임 이벤트 (크기 조정)
//     function handleResize(e) {
//       if (isResizing) {
//         var newWidth = e.clientX - modal.getBoundingClientRect().left;
//         var newHeight = e.clientY - modal.getBoundingClientRect().top;

//         // 최소 크기 설정
//         if (newWidth > 200) modal.style.width = newWidth + 'px';
//         if (newHeight > 150) modal.style.height = newHeight + 'px';
//       }
//     }

//     // 마우스 업 이벤트 (크기 조정 끝)
//     function stopResizing() {
//       isResizing = false;
//       document.removeEventListener('mousemove', handleResize);
//       document.removeEventListener('mouseup', stopResizing);
//     }



let clicked = false;  // 클릭 상태를 추적하는 변수

function toggleText() {
    const homeText = document.querySelector(".main3");

    // 클릭된 상태라면 텍스트 변경
    if (!clicked) {
        homeText.innerHTML = "-> Home";
        clicked = true;
    }

    // 페이지 새로 고침
    location.reload();
}



</script>

</body>

</html>
